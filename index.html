<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>TulenmasCandy Hunt</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    user-select: none;
    -webkit-user-select: none;
    -webkit-touch-callout: none;
}

body {
    font-family: system-ui, -apple-system, Arial, sans-serif;
    background: #000;
    color: white;
}

/* ===== HEADER ===== */
header {
    position: fixed;
    top: 0;
    width: 100%;
    padding: 14px;
    text-align: center;
    background: rgba(0,0,0,0.7);
    z-index: 10;
    font-size: 18px;
}

/* ===== SCENE ===== */
.scene {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.scene img.bg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: none;
}

/* ===== CANDY ===== */
.candy {
    position: absolute;
    cursor: pointer;
    transition: transform 0.2s;
}

.candy:active {
    transform: scale(1.2);
}

/* ===== OVERLAY ===== */
.overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.88);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    z-index: 100;
    padding: 30px;
}

.overlay p {
    font-size: 22px;
    line-height: 1.6;
}
</style>
</head>

<body>

<header>
    Найдено: <span id="found">0</span> / 5
</header>

<div id="game"></div>

<script>
/* ===== ДАННЫЕ ===== */
const scenes = [
    { img: "img1.jpg", size: 48, x: 60, y: 70 },
    { img: "img2.jpg", size: 36, x: 30, y: 55 },
    { img: "img3.jpg", size: 28, x: 72, y: 40 },
    { img: "img4.jpg", size: 20, x: 45, y: 65 },
    { img: "img5.jpg", size: 14, x: 80, y: 75 }
];

let current = 0;
let found = 0;

const game = document.getElementById("game");
const foundEl = document.getElementById("found");

/* ===== ЗАПРЕТ ЗУМА ===== */
document.addEventListener("wheel", e => e.preventDefault(), { passive:false });
document.addEventListener("gesturestart", e => e.preventDefault());
document.addEventListener("dblclick", e => e.preventDefault());

/* ===== ЗАГРУЗКА СЦЕНЫ ===== */
function loadScene() {
    game.innerHTML = "";

    const s = scenes[current];

    const scene = document.createElement("div");
    scene.className = "scene";

    const bg = document.createElement("img");
    bg.src = s.img;
    bg.className = "bg";

    const candy = document.createElement("img");
    candy.src = "candy.png";
    candy.className = "candy";
    candy.style.width = s.size + "px";
    candy.style.left = s.x + "%";
    candy.style.top = s.y + "%";

    candy.onclick = () => {
        found++;
        foundEl.textContent = found;
        current++;

        if (current < scenes.length) {
            loadScene();
        } else {
            finish();
        }
    };

    scene.append(bg, candy);
    game.append(scene);
}

/* ===== ФИНАЛ ===== */
function finish() {
    document.body.insertAdjacentHTML("beforeend", `
        <div class="overlay">
            <p>
                Молодец, ты прошел испытание 1.<br>
                Пришли данный скрин в группу «TulenmasCandy Hunt»,<br>
                чтобы получить 10 TulenmasCandy
            </p>
        </div>
    `);
}

/* ===== СТАРТ ===== */
loadScene();
</script>

</body>
</html>
